# Arquitectura del Proyecto: Pipeline de datos en la nube con Prefect Cloud

## âœ… VisiÃ³n general de la arquitectura:

### 1. OrquestaciÃ³n
- **Prefect Cloud**: Todo el pipeline estarÃ¡ registrado y desplegado en Prefect Cloud.
- Los flujos se podrÃ¡n ejecutar de manera manual o automÃ¡tica desde la nube.
- Las ejecuciones estarÃ¡n asociadas a un agente en la nube o local (proceso ligero que escucharÃ¡ las ejecuciones desde Prefect Cloud).

### 2. Fuentes de datos
- **API PÃºblica (EIA)**: ExtracciÃ³n automatizada desde la API pÃºblica de la U.S. Energy Information Administration.
- **Dataset Open Data**: Archivo `owid-energy-data.xlsx` subido al repositorio y almacenado en `/data`.

### 3. Base de datos
- **PostgreSQL en Aiven**: La base de datos estarÃ¡ provisionada en la nube (Aiven), con tablas para las dos fuentes de datos.
- La conexiÃ³n serÃ¡ gestionada mediante SQLAlchemy y definida en un archivo `config/database.yaml`.

### 4. Repositorio Git (GitHub o GitLab)
- Toda la estructura del proyecto estarÃ¡ versionada:
  - `flows/` para los flujos ETL.
  - `deployments/` para los archivos YAML de despliegue.
  - `config/` para configuraciones.
  - `dashboards/` para visualizaciones.
  - `README.md` con instrucciones claras.

### 5. AutomatizaciÃ³n
- La ejecuciÃ³n de los pipelines estarÃ¡ programada con Prefect Cloud usando `cron schedules`.
- Se podrÃ¡ configurar notificaciones (Slack, Email o Teams) desde Prefect Cloud en caso de errores.

### 6. VisualizaciÃ³n
- ConexiÃ³n desde Power BI o Grafana a la base de datos en Aiven.
- Dashboard dinÃ¡mico con mÃ©tricas clave: precios del petrÃ³leo, tendencias histÃ³ricas, comparaciÃ³n entre fuentes.

### 7. Reproducibilidad
- Al clonar el proyecto, cualquier persona podrÃ¡:
  - Instalar dependencias con `pip install -r requirements.txt`.
  - Configurar variables de entorno y el archivo `database.yaml`.
  - Ejecutar flujos localmente o registrarlos en Prefect Cloud.
  - Visualizar los datos con dashboards conectados.

## âœ… Arquitectura en esquema:
```
API PÃºblica (EIA)   ->  Prefect Flow  -> TransformaciÃ³n -> PostgreSQL (Aiven)
Open Data (Excel)   ->  Prefect Flow  -> TransformaciÃ³n -> PostgreSQL (Aiven)

PostgreSQL (Aiven)  -> Power BI / Grafana (visualizaciÃ³n en la nube)

OrquestaciÃ³n y monitoreo centralizado desde Prefect Cloud.
```

Si quieres, te puedo armar un diagrama visual (con diagramas de arquitectura) en formato imagen para tu documentaciÃ³n. Â¿Quieres que lo genere? ğŸ˜
